jQuery(function(a){a(".wplf-color-picker").wpColorPicker()});var wplf={repeatable:{init:function(){var a=$("body");a.on("click",".repeatable-add-group-row-button",function(){var a=$(this),b=a.data("rowtemplate"),c=a.data("group"),d=$("#"+b).html();if(d.replace(/{{id}}/g,"i_rowID"),a.data("field")){var e=a.data("field").split("-");d=d.replace(/\_\_i\_\_/g,e[e.length-2])}d=d.replace(/\_\_count\_\_/g,a.parent().parent().find("."+c+"-groupitems").length),$("#repeatable-"+c+"-form").append(d),wplf.repeatable.sortCreate(c)}),a.on("click",".repeatable-fields-remove-group-row",function(){var a=$(this).data("group");$(this).closest("table").remove(),wplf.repeatable.reIndex(a)}),$(".wplf-repeatable-form").each(function(){var a=$(this).data("group");wplf.repeatable.sortCreate(a);$(this).data("singleval")})},sortCreate:function(a){var b=$("#repeatable-"+a+"-form");b.sortable({animation:150,handle:"."+a+"-repeatable-fields-handle",onEnd:function(b){wplf.repeatable.reIndex(a)}})},sortDestroy:function(a){var b=$("#repeatable-"+a+"-form");return b.sortable("destroy")},reIndex:function(a){$("."+a+"-groupitems").each(function(b){$(this).find("[name^='"+a+"[']").each(function(a){var c=$(this).attr("name");if(c){var d=c.replace(/\[\d+]/,"["+b+"]");$(this).attr("name",d)}})})}}};jQuery(function(a){wplf.repeatable.init()}),jQuery(function(a){var b=!1;"undefined"!=typeof wplf_css_codeeditor&&(b=wp.codeEditor.initialize(a("#wplf_custom_css"),wplf_css_codeeditor)),a(".nav-tab-wrapper a").click(function(){a(".settings_panel").hide(),a(".nav-tab-active").removeClass("nav-tab-active wp-ui-primary").css("color","#555555").css("background","#e4e4e4"),a(a(this).attr("href")).show();var c=a(".wp-ui-primary").getHexBackgroundColor();return a(this).addClass("nav-tab-active").css("background",c),a("#wplf-all-settings .settings_panel").css("border",""),"custom_page"===a(this).data("tab")&&b&&b.codemirror.refresh(),!1}),a(".nav-tab-wrapper a").hover(function(){var b=a(".wp-ui-primary").getHexBackgroundColor();a(this).css("color","#FFFFFF").css("background",b)},function(){a(this).hasClass("nav-tab-active")||a(this).css("color","#555555").css("background","#e4e4e4")}),a(".nav-tab-wrapper a:first").click(),a("#wplf_register_set_pw").click(function(){a(this).is(":checked")&&a("#wplf_require_activation").prop("checked",!1)}),a("#wplf_require_activation").click(function(){a(this).is(":checked")&&a("#wplf_register_set_pw").prop("checked",!1)})}),jQuery.fn.getHexBackgroundColor=function(){function a(a){return("0"+parseInt(a).toString(16)).slice(-2)}var b=jQuery(this).css("background-color");if(!b)return"#FFFFFF";var c=b.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return c?"#"+a(c[1])+a(c[2])+a(c[3]):b};var file_frame;jQuery(function(a){a(".wplf-upload-show").live("click",function(b){b.preventDefault();var c=a(this).data("name");return file_frame?void file_frame.open():(file_frame=wp.media.frames.file_frame=wp.media({title:a(this).data("title"),library:{type:"image"},button:{text:a(this).data("button")},multiple:!1}),file_frame.on("select",function(){var b=file_frame.state().get("selection").first().toJSON();a("#"+c).val(b.url),a("#"+c+"-img").prop("src",b.url),a("#"+c+"-ul").show()}),void file_frame.open())}),a(".wpjm-upload-remove").click(function(b){b.preventDefault();var c=a(this).data("name");a("#"+c).val(""),a("#"+c+"-ul").hide()})});