var file_frame;jQuery(function(e){e(".wplf-color-picker").wpColorPicker()}),jQuery(function(n){var o={repeatable:{init:function(){var e=n("body");e.on("click",".repeatable-add-group-row-button",function(){var e,t=n(this),a=t.data("rowtemplate"),r=t.data("group"),i=n("#"+a).html();i.replace(/{{id}}/g,"i_rowID"),t.data("field")&&(e=t.data("field").split("-"),i=i.replace(/\_\_i\_\_/g,e[e.length-2])),i=i.replace(/\_\_count\_\_/g,t.parent().parent().find("."+r+"-groupitems").length),n("#repeatable-"+r+"-form").append(i),o.repeatable.sortCreate(r)}),e.on("click",".repeatable-fields-remove-group-row",function(){var e=n(this).data("group");n(this).closest("table").remove(),o.repeatable.reIndex(e)}),n(".wplf-repeatable-form").each(function(){var e=n(this).data("group");o.repeatable.sortCreate(e)})},sortCreate:function(t){n("#repeatable-"+t+"-form").sortable({animation:150,handle:"."+t+"-repeatable-fields-handle",onEnd:function(e){o.repeatable.reIndex(t)}})},sortDestroy:function(e){var t=n("#repeatable-"+e+"-form");return t.sortable("destroy")},reIndex:function(e){n("."+e+"-groupitems").each(function(r){n(this).find("[name^='"+e+"[']").each(function(e){var t,a=n(this).attr("name");a&&(t=a.replace(/\[\d+]/,"["+r+"]"),n(this).attr("name",t))})})}}};o.repeatable.init()}),jQuery(function(t){var a=!1;"undefined"!=typeof wplf_css_codeeditor&&(a=wp.codeEditor.initialize(t("#wplf_custom_css"),wplf_css_codeeditor)),t(".nav-tab-wrapper a").click(function(){t(".settings_panel").hide(),t(".nav-tab-active").removeClass("nav-tab-active wp-ui-primary").css("color","#555555").css("background","#e4e4e4"),t(t(this).attr("href")).show();var e=t(".wp-ui-primary").getHexBackgroundColor();return t(this).addClass("nav-tab-active").css("background",e),t("#wplf-all-settings .settings_panel").css("border",""),"custom_page"===t(this).data("tab")&&a&&a.codemirror.refresh(),!1}),t(".nav-tab-wrapper a").hover(function(){var e=t(".wp-ui-primary").getHexBackgroundColor();t(this).css("color","#FFFFFF").css("background",e)},function(){t(this).hasClass("nav-tab-active")||t(this).css("color","#555555").css("background","#e4e4e4")}),t(".nav-tab-wrapper a:first").click(),t("#wplf_register_set_pw").click(function(){t(this).is(":checked")&&t("#wplf_require_activation").prop("checked",!1)}),t("#wplf_require_activation").click(function(){t(this).is(":checked")&&t("#wplf_register_set_pw").prop("checked",!1)})}),jQuery.fn.getHexBackgroundColor=function(){var e=jQuery(this).css("background-color");if(!e)return"#FFFFFF";var t=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);function a(e){return("0"+parseInt(e).toString(16)).slice(-2)}return t?"#"+a(t[1])+a(t[2])+a(t[3]):e},jQuery(function(a){a(".wplf-upload-show").live("click",function(e){e.preventDefault();var t=a(this).data("name");file_frame||(file_frame=wp.media.frames.file_frame=wp.media({title:a(this).data("title"),library:{type:"image"},button:{text:a(this).data("button")},multiple:!1})).on("select",function(){var e=file_frame.state().get("selection").first().toJSON();a("#"+t).val(e.url),a("#"+t+"-img").prop("src",e.url),a("#"+t+"-ul").show()}),file_frame.open()}),a(".wpjm-upload-remove").click(function(e){e.preventDefault();var t=a(this).data("name");a("#"+t).val(""),a("#"+t+"-ul").hide()})});