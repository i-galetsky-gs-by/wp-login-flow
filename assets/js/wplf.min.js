jQuery(function(e){e(".wplf-color-picker").wpColorPicker()});var file_frame,wplf={repeatable:{init:function(){var e=$("body");e.on("click",".repeatable-add-group-row-button",function(){var e=$(this),t=e.data("rowtemplate"),a=e.data("group"),r=$("#"+t).html();if(r.replace(/{{id}}/g,"i_rowID"),e.data("field")){var i=e.data("field").split("-");r=r.replace(/\_\_i\_\_/g,i[i.length-2])}r=r.replace(/\_\_count\_\_/g,e.parent().parent().find("."+a+"-groupitems").length),$("#repeatable-"+a+"-form").append(r),wplf.repeatable.sortCreate(a)}),e.on("click",".repeatable-fields-remove-group-row",function(){var e=$(this).data("group");$(this).closest("table").remove(),wplf.repeatable.reIndex(e)}),$(".wplf-repeatable-form").each(function(){var e=$(this).data("group");wplf.repeatable.sortCreate(e);$(this).data("singleval")})},sortCreate:function(t){$("#repeatable-"+t+"-form").sortable({animation:150,handle:"."+t+"-repeatable-fields-handle",onEnd:function(e){wplf.repeatable.reIndex(t)}})},sortDestroy:function(e){var t=$("#repeatable-"+e+"-form");return t.sortable("destroy")},reIndex:function(e){$("."+e+"-groupitems").each(function(r){$(this).find("[name^='"+e+"[']").each(function(e){var t=$(this).attr("name");if(t){var a=t.replace(/\[\d+]/,"["+r+"]");$(this).attr("name",a)}})})}}};jQuery(function(e){wplf.repeatable.init()}),jQuery(function(t){var a=!1;"undefined"!=typeof wplf_css_codeeditor&&(a=wp.codeEditor.initialize(t("#wplf_custom_css"),wplf_css_codeeditor)),t(".nav-tab-wrapper a").click(function(){t(".settings_panel").hide(),t(".nav-tab-active").removeClass("nav-tab-active wp-ui-primary").css("color","#555555").css("background","#e4e4e4"),t(t(this).attr("href")).show();var e=t(".wp-ui-primary").getHexBackgroundColor();return t(this).addClass("nav-tab-active").css("background",e),t("#wplf-all-settings .settings_panel").css("border",""),"custom_page"===t(this).data("tab")&&a&&a.codemirror.refresh(),!1}),t(".nav-tab-wrapper a").hover(function(){var e=t(".wp-ui-primary").getHexBackgroundColor();t(this).css("color","#FFFFFF").css("background",e)},function(){t(this).hasClass("nav-tab-active")||t(this).css("color","#555555").css("background","#e4e4e4")}),t(".nav-tab-wrapper a:first").click(),t("#wplf_register_set_pw").click(function(){t(this).is(":checked")&&t("#wplf_require_activation").prop("checked",!1)}),t("#wplf_require_activation").click(function(){t(this).is(":checked")&&t("#wplf_register_set_pw").prop("checked",!1)})}),jQuery.fn.getHexBackgroundColor=function(){var e=jQuery(this).css("background-color");if(!e)return"#FFFFFF";var t=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);function a(e){return("0"+parseInt(e).toString(16)).slice(-2)}return t?"#"+a(t[1])+a(t[2])+a(t[3]):e},jQuery(function(a){a(".wplf-upload-show").live("click",function(e){e.preventDefault();var t=a(this).data("name");file_frame||(file_frame=wp.media.frames.file_frame=wp.media({title:a(this).data("title"),library:{type:"image"},button:{text:a(this).data("button")},multiple:!1})).on("select",function(){var e=file_frame.state().get("selection").first().toJSON();a("#"+t).val(e.url),a("#"+t+"-img").prop("src",e.url),a("#"+t+"-ul").show()}),file_frame.open()}),a(".wpjm-upload-remove").click(function(e){e.preventDefault();var t=a(this).data("name");a("#"+t).val(""),a("#"+t+"-ul").hide()})});